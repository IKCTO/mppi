
# Установка Lammps на Ubuntu
## Через github:
>Перед установкой Lammps убедитесь что у вас установлены git и cmake.
>Если не установлены, то пропишите следующие команды:
```sudo apt-get install git``` и ```sudo apt-get cmake```

Создайте директорию в которой будут хранится исполняемые файлы и перейдите в неё. 
Пример:
```
mkdir lammps
cd lammps
```
Пропишите следующую команду, чтобы скачать необходимые файлы с git репозитория:
```
git clone -b stable https://github.com/lammps/lammps.git mylammps
cd mylammps/
```
В случае ошибки проверьте параметры установки и авторизации в git. Если же возникли проблемы непосредственно с репозиторием, проверьте его актуальность ( [официальный сайт lammps](https://guriang.unpad.ac.id/hpc/lammpsdoc/Install_git.html)  ).

> Проверьте наличие следующих пакетов и при их отсутствии установите их:
```
sudo apt install -y cmake build-essential ccache gfortran openmpi-bin libopenmpi-dev \
                    libfftw3-dev libjpeg-dev libpng-dev python3-dev python3-pip \
                    python3-virtualenv libblas-dev liblapack-dev libhdf5-serial-dev \
                    hdf5-tools
```

## Процесс сборки:

Создаёте директорию для сборки:
```
mkdir build
cd build
```
>Если вы следовали чётко по данной инструкции то ваш путь должен представлять собой: ``` user-name:~/lammps/mylammps/build$ ```

Создайте Cmake:
```
cmake -D CMAKE_INSTALL_PREFIX=/home/user-name/lammps/lammps-install ../cmake/
```
### Конфигурация
Следующим шагом установите ccmake. Этот инструмент предоставляет своего рода пользовательский интерфейс для просмотра всех доступных опций cmake в проекте. 
```
sudo apt-get install cmake-curses-gui
```
Пропишите следующую команду, чтобы открыть интерфейс для просмотра доступных опций сборки lammps:
```
ccmake ../cmake/
```

Для дальнейшей работы включите в конфигурацию **CMAKE_CXX_EXTENSIONS** и **PKG_COLLOID**

![[Pasted image 20240327192225.png]]
![[Pasted image 20240327192351.png]]

Далее нажмите клавишу **c** чтобы сконфигурировать.

![[Pasted image 20240327192747.png]]

Затем нажмите клавишу **g** чтобы сгенерировать Makefile. Вы можете проверить его наличие посмотрев список фалов в директории build
![[Pasted image 20240327194221.png]]

Чтобы запустить компиляцию программы, пропишите следующую команду:
```
make -j4
```
Таким образом lammps был скомпилирован как библиотека.
![[Pasted image 20240327195317.png]]

Следующая команда:
```
make install
```
Программа записывает все данные в каталог lammps-install.

### Запуск lammps
Перейдите в следующий каталог ( если вы действовали чётко согласно инструкции ): ```/home/user-name/lammps/lammps-install/bin```
Находясь в этом каталоге вы можете запустить lammps командой ```./lmp```:
![[Pasted image 20240327202451.png]]
Чтобы прекратить работу нажмите Ctrl+c.
### Дополнительные настройки
- Также находясь в lammps-install/bin пропишите команду ```pwd``` чтобы получить путь к файлу запуска ```lmp```. Скопируйте этот путь.
- Вернитесь в ```/home/user-name/``` ( достаточно прописать "cd" в командной строке ).
- Пропишите команду ```nano .bashrc```
- В конце отрытого файла пропишите: 
  ``` export PATH=$PATH:/home/user-name/lammps/lammps-install/bin```
  Нажмите ```Ctrl+x```, затем ```y``` и после ```Enter``` 

>Теперь при запуске новой сессии вы сможете запустить lammps командой ```lmp``` из любого каталога.

#### Запуск тестового расчёта:
Находясь в корневом каталоге ( пропишите "cd" ) выполните следующие команды ( если вы следовали чётко по инструкции можете просто скопировать и вставить ):
```
mkdir tests
cd tests/
cp ../lammps/mylammps/examples/colloid/in.colloid .
lmp < in.colloid
```
Пример вывода:
![[Pasted image 20240327204748.png]]

### Реконфигурация??
По сути просто используя ccmake подключаем нужные пакеты и заново запускаем сборку. Надо ли расписать подробнее?